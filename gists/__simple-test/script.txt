title Beam Islands
author mjau
homepage http://twitter.com/kamjau
run_rules_on_level_start
realtime_interval 0.3
text_color #f197e9
(debug)

( for ludum dare 29 )

=========
 OBJECTS
=========

(
	#000000 Black
	#df2619 Inactive border
	#078ffd Active border
	#a27d5b Bridge
	#6719ac Dark water
	#a13cb7 Light water
	#f197e9 Beam water
	#606060 Beam under
	#f7e26b Player
	#ffffff White
)

Animate
Transparent

BgNW1 .
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgNE1
#6719ac #a13cb7
00000
00000
00100
00000
00000

BgSW1
#6719ac #a13cb7
00000
00000
00000
01000
00000

BgSE1
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgNW2
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgNE2
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgSW2
#6719ac #a13cb7
00000
00000
00000
01100
00000

BgSE2
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgNW3
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgNE3
#6719ac #a13cb7
00000
00000
01000
00000
00000

BgSW3
#6719ac #a13cb7
00000
00000
00000
00100
00000

BgSE3
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgNW4
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgNE4
#6719ac #a13cb7
00000
00000
01100
00000
00000

BgSW4
#6719ac #a13cb7
00000
00000
00000
00000
00000

BgSE4
#6719ac #a13cb7
00000
00000
00000
00000
00000

PlayerTop
#f7e26b
.....
.....
.....
.0.0.
.000.

Player
#f7e26b #000000
01010
.000.
.0.0.
.....
.....

Island #
#000000

FromBlockIsland
Transparent

IslandEdgeDetect
Transparent

IslandInterior
Transparent

IslandSide
#000000
00000
.....
.....
.....
.....

BeamTop1
#ffffff #f197e9 #a13cb7
..2..
..1..
..0..
..1..
..0..

BeamTop2
#ffffff #f197e9 #a13cb7
.....
..2..
..1..
..0..
..0..

Beam o
#ffffff #f197e9 #a13cb7
.101.
.000.
.000.
.000.
.212.

BeamReflect
#a13cb7
..0..
.....
.....
.....
.....

Bridge -
#000000 #a27d5b
.....
.111.
.101.
.111.
.000.

BeamUnder
#606060
.....
..0..
.000.
.000.
.....

PlayerIsland
#078ffd
.....
.....
..0..
.....
.....

BlockIsland
Transparent #df2619
.....
.....
..0..
.....
.....

IslandEdgeN
Transparent #df2619
11111
.....
.....
.....
.....

PlayerIslandEdgeN
Transparent #078ffd
11111
.....
.....
.....
.....

IslandEdgeS
Transparent #df2619
.....
.....
.....
.....
11111

PlayerIslandEdgeS
Transparent #078ffd
.....
.....
.....
.....
11111

IslandEdgeE
Transparent #df2619
....1
....1
....1
....1
....1

PlayerIslandEdgeE
Transparent #078ffd
....1
....1
....1
....1
....1

IslandEdgeW
Transparent #df2619
1....
1....
1....
1....
1....

PlayerIslandEdgeW
Transparent #078ffd
1....
1....
1....
1....
1....


IslandInnerEdgeNW
Transparent #df2619
1....
.....
.....
.....
.....

PlayerIslandInnerEdgeNW
Transparent #078ffd
1....
.....
.....
.....
.....

IslandInnerEdgeNE
Transparent #df2619
....1
.....
.....
.....
.....

PlayerIslandInnerEdgeNE
Transparent #078ffd
....1
.....
.....
.....
.....

IslandInnerEdgeSW
Transparent #df2619
.....
.....
.....
.....
1....

PlayerIslandInnerEdgeSW
Transparent #078ffd
.....
.....
.....
.....
1....

IslandInnerEdgeSE
Transparent #df2619
.....
.....
.....
.....
....1

PlayerIslandInnerEdgeSE
Transparent #078ffd
.....
.....
.....
.....
....1

========
 LEGEND
========

Background = BgNW1 or BgNE1 or BgSW1 or BgSE1 or BgNW2 or BgNE2 or BgSW2 or BgSE2 or BgNW3 or BgNE3 or BgSW3 or BgSE3 or BgNW4 or BgNE4 or BgSW4 or BgSE4


A = PlayerIsland and Player and IslandInterior and IslandEdgeW and IslandEdgeS and IslandEdgeN and Island
B = PlayerIsland and IslandInterior and IslandEdgeS and IslandEdgeN and Island
C = PlayerIsland and IslandInterior and IslandEdgeE and IslandEdgeS and IslandEdgeN and Island

IslandEdgeV = IslandEdgeN or IslandEdgeS
IslandEdgeH = IslandEdgeE or IslandEdgeW
IslandInnerEdge = IslandInnerEdgeNW or IslandInnerEdgeNE or IslandInnerEdgeSW or IslandInnerEdgeSE
IslandEdge = IslandEdgeH or IslandEdgeV or IslandInnerEdge or IslandEdgeDetect or IslandInterior
Movable = Player or Island or IslandEdge or PlayerIsland
MoveBlock = Island or Bridge
Walkable = Island or Bridge
BeamTop = BeamTop1 or BeamTop2

IslandEdgeDetectN = IslandEdgeN or IslandEdgeDetect
IslandEdgeDetectS = IslandEdgeS or IslandEdgeDetect
IslandEdgeDetectE = IslandEdgeE or IslandEdgeDetect
IslandEdgeDetectW = IslandEdgeW or IslandEdgeDetect

Cleanup = IslandInnerEdge or BeamTop or BeamUnder or IslandSide or PlayerTop or BeamReflect

Frame2 = BgNW2 or BgNW4

========
 SOUNDS
========

SFX0 57465701 ( beam )
SFX1 45881509 ( merge )
SFX2 70148904 ( can't move )
SFX3 3171908  ( move )
EndLevel 94824903

=================
 COLLISIONLAYERS
=================

Background
Animate
IslandSide, BeamReflect
Beam
Island, Bridge
IslandEdgeN, PlayerIslandEdgeN
IslandEdgeS, PlayerIslandEdgeS
IslandEdgeE, PlayerIslandEdgeE
IslandEdgeW, PlayerIslandEdgeW
IslandInnerEdgeNW, PlayerIslandInnerEdgeNW
IslandInnerEdgeNE, PlayerIslandInnerEdgeNE
IslandInnerEdgeSW, PlayerIslandInnerEdgeSW
IslandInnerEdgeSE, PlayerIslandInnerEdgeSE
IslandInterior, IslandEdgeDetect
BeamUnder
Player
PlayerIsland, BlockIsland, FromBlockIsland
BeamTop
PlayerTop

=======
 RULES
=======

( simple movement )

( edge detection )

( player island )

( rigid movement )
[ > Player ][ PlayerIsland ] -> [ > Player ][ > PlayerIsland ]
(PHIL. Adding in the "NO Moveblock" is the culprit. Removing it makes both implementations run the same)
[ > PlayerIsland Island | no MoveBlock ] -> [ > PlayerIsland > Island | ]
[ < Island | Island no BlockIsland ] -> [ < Island | < Island ]

[ > PlayerIsland IslandEdge ] -> [ > PlayerIsland > IslandEdge ]



===============
 WINCONDITIONS
===============


========
 LEVELS
========

..ABC...
